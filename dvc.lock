schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 1bbc39ab6dca2172444dc50fa2fe1e08
      size: 677
    - path: src/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 648ca152f7a9a98d8f81ae254f958fb7
      size: 845
  prepare_base_model:
    cmd: python src/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 1bbc39ab6dca2172444dc50fa2fe1e08
      size: 677
    - path: src/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 83865a871c81960492fad1ed13dfa992
      size: 926
    params:
      params.yaml:
        CLASSES: 2
        IMAGE_SIZE:
        - 244
        - 244
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 3476cf6621bc88beb34c246545ff3e22.dir
      size: 595974298
      nfiles: 2
  training:
    cmd: python src/pipeline/stage_03_training.py
    deps:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 3476cf6621bc88beb34c246545ff3e22.dir
      size: 595974298
      nfiles: 2
    - path: brain-tumor-dataset
      hash: md5
      md5: 8d77130541d5cd05acd22e04939d2ae2.dir
      size: 8672762
      nfiles: 253
    - path: config/config.yaml
      hash: md5
      md5: 1bbc39ab6dca2172444dc50fa2fe1e08
      size: 677
    - path: src/components/prepare_callbacks.py
      hash: md5
      md5: 62811e1fa38c8292e356b8b55164e7ce
      size: 1517
    - path: src/pipeline/stage_03_training.py
      hash: md5
      md5: 0555ab27d62b23f0df1e00092a650120
      size: 966
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        EPOCHS: 1
        IMAGE_SIZE:
        - 244
        - 244
        - 3
    outs:
    - path: artifacts/training/model.pth
      hash: md5
      md5: 95eca9e8d0253fcbf42919ea3a31091a
      size: 537095031
  model_evaluation:
    cmd: python src/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/training/model.pth
      hash: md5
      md5: 95eca9e8d0253fcbf42919ea3a31091a
      size: 537095031
    - path: brain-tumor-dataset
      hash: md5
      md5: 8d77130541d5cd05acd22e04939d2ae2.dir
      size: 8672762
      nfiles: 253
    - path: config/config.yaml
      hash: md5
      md5: 1bbc39ab6dca2172444dc50fa2fe1e08
      size: 677
    - path: src/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 2ace90843d8ef60170b4cef3a4a66465
      size: 997
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 244
        - 244
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: c433c235dc430eaad83101e4ac955be4
      size: 58
